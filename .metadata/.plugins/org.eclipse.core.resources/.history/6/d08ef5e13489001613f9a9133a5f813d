import java.util.Random;

import org.newdawn.slick.Image;
import org.newdawn.slick.SlickException;

public class Monster extends Unit{
	private Image MonsterImage;
	private double width, height;
	private String type;
	private static final double PSPEED=0.2;
	private int timer =0;
	private int waitTime=3000;
	Random randomx=new Random();
	Random randomy=new Random();
	int randomX=(randomx.nextInt(3)-1);
	int randomY=(randomy.nextInt(3)-1);
	int x_sign;
	int y_sign;

	
	public Monster(int MaxHp, int MaxDamage, int rate,String name, 
			int xPos, int yPos, String ImagePath, String type) 
	throws SlickException 
	{
		super(MaxHp, MaxDamage, rate, name, xPos, yPos);
		MonsterImage=new Image(ImagePath);
		this.type=type;
		this.width=MonsterImage.getWidth();
		this.height=MonsterImage.getHeight();
	}




	public String getType() {
		return type;
	}
	
	public void render(){
		MonsterImage.drawCentered((int)getxPos(), (int)getyPos());
		
	}
	
	public void wander(double delta, World world){
		double new_x;
		double new_y;
		
		timer+=delta;
		
		if (timer>waitTime){
			timer=0;
			x_sign=randomX;
			y_sign=randomY;
		}
		
		new_x=getxPos()+x*delta*PSPEED;
		new_y=getyPos()+y*delta*PSPEED;
       /*
        
        if(!world.terrainBlocks(new_x + x_sign * width / 3, this.y + height / 3) 
                && !world.terrainBlocks(new_x + x_sign * width / 3, this.y - height / 3)) {
            this.x = new_x;
        }
        
        // Then move in y
        double y_sign = Math.signum(dir_y);
        if(!world.terrainBlocks(this.x + width / 3, new_y + y_sign * height / 3) 
                && !world.terrainBlocks(this.x - width / 3, new_y + y_sign * height / 3)){
            this.y = new_y;
        }
		*/
			
		if(!world.terrainBlocks(new_x + x_sign * width / 3, this.y + height / 3) 
                && !world.terrainBlocks(new_x + x_sign * width / 3, this.y - height / 3)) {
			setxPos(new_x);
        }
        
        // Then move in y
        if(!world.terrainBlocks(this.x + width / 3, new_y + y_sign * height / 3) 
                && !world.terrainBlocks(this.x - width / 3, new_y + y_sign * height / 3)){
            setyPos(new_y)
        }
				
		
				//System.out.println("randomx:"+x+"  randomy:"+y);
		
		}
		
	
	
	
	

}
